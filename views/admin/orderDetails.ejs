<%- include('../layouts/adminHeader') %>
   

<section class="content-main">
    <div class="content-header">
        <div>
            <h2 class="content-title card-title">Order List</h2>
            <p>All the users order listing</p>
        </div>
        <div>
           
        </div>
    </div>
    <div class="card mb-4">
        <header class="card-header">
            <div class="row gx-3">
                <div class="col-lg-4 col-md-6 me-auto">
                   
                </div>
                
                
            </div>
        </header>
        <!-- card-header end// -->
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th style="width: 50px;">ID</th>
                            <th>Order Number</th>
                            <th>Status</th>
                            <th>Date</th>
                            <th>Customer</th>
                            <th>Total Price</th>
                        
                            <th style="width: 200px;">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% for(let i = 0; i < orderDetails.length; i++) { %>
                            <% const order = orderDetails[i]; %>
                            <% const item = order.orderedItem[0]; %>
                            <tr>
                                <td><%= i + 1 %></td>
                                <td><%= order._id %></td>
                                <td><%= order.orderStatus %></td>
                                <td><%= order.formattedCreatedAt %></td>
                                <td><%= order.deliveryAddress ? order.deliveryAddress.name : 'N/A' %></td>
                                <td>â‚¹<%= order.orderAmount %></td>
                                <td>
                                    <a href="javascript:void(0);" class="btn border btn-dark view-btn" data-id="<%= order._id %>">View</a>
                                </td>
                            </tr>
                        <% } %>
                    </tbody>
                   
                </table>
            </div>
           
        </div>
       
    </div>
   
    <% if (orderDetails.length > 0) { %>
        <div class="pagination-area mt-15 mb-50">
            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-start">
                    <li class="page-item active"><a class="page-link" href="#">01</a></li>
                    <li class="page-item"><a class="page-link" href="#">02</a></li>
                    <li class="page-item"><a class="page-link" href="#">03</a></li>
                  
                    <li class="page-item">
                        <a class="page-link" href="#"><i class="material-icons md-chevron_right"></i></a>
                    </li>
                </ul>
            </nav>
        </div>
    <% } %>
    </section>
    

    <%- include('../layouts/AdminFooter') %>  


<script>
    
    document.addEventListener('DOMContentLoaded', function() {
    document.addEventListener('click', function(event) {
        if (event.target.classList.contains('view-btn')) {
            var orderId = event.target.getAttribute('data-id');
            console.log("orderId", orderId);
            window.location.href = '/admin/singleorderview?orderId=' + orderId;
        }
    });
})
    </script>